package main.java;

import java.util.Calendar;
import java.util.Scanner;

public class Membership {
  private static Membership m;

  // membershipGuide
  String name; // user name
  String personalYY; // user YY
  String personalMM; // user MM
  String personalDD; // user DD
  String email; // user E-mail
  String address; // user add
  String pw = "0000"; // user pw


  /** Set Membership **/
  public static Membership getInstance() {

    if (m == null) {
      m = new Membership();
    }

    return m;
  }



  /** reset Membership **/
  public static void freeInstance() {
    m = null;
  }



  /** Mem's Information get **/
  public void membershipGuide() {

    // String answer = ""; // user answer
    //
    // Scanner sc = new Scanner(System.in);

    ///////////////////////////////////////////////////////////////////////////////////////////////
    ///////////////////////////////////////////////////////////////////////////////////////////////
    ///////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////// SYSTEM MESAGE///////////////////////////////////////////
    ///////////////////////////////////////////////////////////////////////////////////////////////

    // System.out.println(
    // " \n\n" + " " + "## #### ###### ###### ###### ##### ## ## \r\n"
    // + " ## ## ## ## ## ## ## ## ## ## \r\n"
    // + " ## ## ## ## ## ##### ##### ###### \r\n"
    // + " ## ## ## ## ## ## ## ## ## \r\n"
    // + " ###### #### ## ## ###### ## ## ##");

    // System.out.println("\n[INFO] 안녕하세요. 동행로또입니다.\n" + "로또 구입을 위해선 회원가입이 필요합니다.\n"
    // + "회원가입을 진행하시겠습니까?\n" + "[1] 예\t[2] 아니요");

    ///////////////////////////////////////////////////////////////////////////////////////////////
    ///////////////////////////////////////////////////////////////////////////////////////////////
    ///////////////////////////////////////////////////////////////////////////////////////////////
    ///////////////////////////////////////////////////////////////////////////////////////////////
    ///////////////////////////////////////////////////////////////////////////////////////////////


    // for (;;) {
    // System.out.print("\n입력 : ");
    // answer = sc.next();
    //
    // // case1: Yes
    // if (answer == "예" || answer == "1") {
    personalData();
    //
    // }
    // // case2: No
    // else if (answer == "아니요" || answer == "2") {
    // System.out.println("\n[ERROR] 회원이 아니면 로또를 구매할 수 없습니다.");
    // System.exit(0);
    // }
    // // case3: ERROR
    // else {
    // System.out.println("\n[ERROR] 잘못된 입력입니다. 다시 입력해주세요.");
    // }
    // }

  }


  public void personalData() {

    // user YY/MM/DD
    int personalYYnum = 0;
    int personalMMnum = 0;
    int personalDDnum = 0;

    int yy = 0;
    int day_cnt = 0;

    Scanner sc = new Scanner(System.in);


    ///////////////////////////////////////////////////////////////////////////////////////////////
    ///////////////////////////////////////////////////////////////////////////////////////////////
    ///////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////// SYSTEM MESAGE///////////////////////////////////////////
    ///////////////////////////////////////////////////////////////////////////////////////////////

    System.out.println("\n=================================================================\n");
    System.out.println("[INFO] 회원가입을 위해 아래의 양식을 채워주세요.\n");

    ///////////////////////////////////////////////////////////////////////////////////////////////
    ///////////////////////////////////////////////////////////////////////////////////////////////
    ///////////////////////////////////////////////////////////////////////////////////////////////
    ///////////////////////////////////////////////////////////////////////////////////////////////
    ///////////////////////////////////////////////////////////////////////////////////////////////



    ////////////////////////////// user name //////////////////////////////
    System.out.print("* 이름 : ");
    this.name = sc.next();


    ////////////////////////////// user YY //////////////////////////////
    // this year(2024)
    Calendar cal = Calendar.getInstance();
    yy = cal.get(Calendar.YEAR);

    for (;;) {
      System.out.print("* 태어난 연도 : ");
      this.personalYY = sc.next();

      personalYYnum = Integer.parseInt(personalYY);

      // case1: age 20 down
      if (personalYYnum == yy || (personalYYnum > yy - 20) && personalYYnum < yy) {
        System.out.println("[ERROR] 미성년자는 로또를 구매할 수 없습니다." + "\n회원가입이 종료됩니다.");
        System.exit(0);
      }
      // case2: ERROR(over year)
      else if (personalYYnum < 1900 || personalYYnum > yy) {
        System.out.println("[ERROR] 잘못된 입력입니다." + "\n태어난 연도를 다시 입력해주세요.\n");
      } else {
        break;
      }
    }


    ////////////////////////////// user MM //////////////////////////////
    for (;;) {
      System.out.print("* 태어난 월 : ");
      this.personalMM = sc.next();

      personalMMnum = Integer.parseInt(personalMM);

      // case1: ERROR(over month)
      if (personalMMnum == 0 || personalMMnum > 12) {
        System.out.println("[ERROR] 잘못된 입력입니다." + "\n태어난 월을 다시 입력해주세요.\n");
      } else {
        break;
      }
    }



    ////////////////////////////// user DD //////////////////////////////
    DatePrinter.printDateTime(cal);
    cal.set(Calendar.DAY_OF_MONTH, personalMMnum);
    day_cnt = cal.getActualMaximum(Calendar.DAY_OF_MONTH);

    for (;;) {
      System.out.print("* 태어난 일 : ");
      this.personalDD = sc.next();

      personalDDnum = Integer.parseInt(personalDD);

      // case1: ERROR(over Day)
      if (personalDDnum == 0 || personalDDnum > day_cnt + 1) {
        System.out.println("[ERROR] 잘못된 입력입니다." + "\n태어난 일을 다시 입력해주세요.\n");
      } else {
        break;
      }
    }


    ////////////////////////////// user Add //////////////////////////////
    System.out.print("* 주소 : ");
    this.address = sc.next();

    ////////////////////////////// user PW //////////////////////////////
    System.out.print("* 결제 비밀번호: ");
    sc.nextLine(); // next() 오류 방지
    this.pw = sc.next();



    ///////////////////////////////////////////////////////////////////////////////////////////////
    ///////////////////////////////////////////////////////////////////////////////////////////////
    ///////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////// SYSTEM MESAGE///////////////////////////////////////////
    ///////////////////////////////////////////////////////////////////////////////////////////////

    System.out.println("\n[INFO] 회원가입이 완료되었습니다.");
    System.out.println("\n=================================================================");

    ///////////////////////////////////////////////////////////////////////////////////////////////
    ///////////////////////////////////////////////////////////////////////////////////////////////
    ///////////////////////////////////////////////////////////////////////////////////////////////
    ///////////////////////////////////////////////////////////////////////////////////////////////
    ///////////////////////////////////////////////////////////////////////////////////////////////


  }
}
